set (EJOVO_LIB

    ejovo_print.c
    ejovo_rand.c
    ejovo_string.c
    ejovo_input.c
    # ejovo_matrix.c
    ejovo_labyrinth.c
    ejovo_sort.c
    ejovo_comp.c
    ejovo_crypto.c
    ejovo_bin.c

)

# I don't remember why I have to do this weird shit...
set (EJOVO_LIB_HEADERS

    ${INC}/ejovo_print.h
    ${INC}/ejovo_rand.h
    ${INC}/ejovo_string.h
    ${INC}/ejovo_input.h
    ${INC}/ejovo_matrix.h
    ${INC}/ejovo_labyrinth.h
    ${INC}/ejovo_sort.h
    ${INC}/ejovo_comp.h
    ${INC}/ejovo_crypto.h
)

set (EJOVO_MATRIX_HEADERS

    ${INC}/matrix/matrix_compute.h
    ${INC}/matrix/matrix_core.h
    ${INC}/matrix/matrix_dist.h
    ${INC}/matrix/matrix_foreach.h
    ${INC}/matrix/matrix_getset.h
    ${INC}/matrix/matrix_iter.h
    ${INC}/matrix/matrix_linear.h
    ${INC}/matrix/matrix_special.h
    ${INC}/matrix/matrix_state.h
    ${INC}/matrix/matrix_stats.h
    ${INC}/matrix/matrix_vector.h
    ${INC}/matrix/matrix.h
)

add_subdirectory(matrix)
# include_directories(${INC}/matrix)


add_library(ejovo STATIC ${EJOVO_LIB} $<TARGET_OBJECTS:ejovo_matrix>)
if (NOT WIN32)
    target_link_libraries(ejovo m)
endif()
target_include_directories(ejovo PRIVATE "${CMAKE_SOURCE_DIR}/inc")
target_include_directories(ejovo PRIVATE "${CMAKE_SOURCE_DIR}/inc/matrix")

set_target_properties(ejovo PROPERTIES

    PUBLIC_HEADER "${EJOVO_LIB_HEADERS}"
    # MATRIX_HEADER "${EJOVO_MATRIX_HEADERS}"

)

include(GNUInstallDirs)
install(TARGETS ejovo
    PUBLIC_HEADER
    DESTINATION ${CMAKE_INSTALL_INCLUDEDIR}/ejovo
    # MATRIX_HEADER ${CMAKE_INSTALL_INCLUDEDIR}/matrix
)

install(DIRECTORY ${INC}/matrix
    DESTINATION ${CMAKE_INSTALL_INCLUDEDIR}/ejovo)

# message("Trying to include directory ${CMAKE_SOURCE_DIR}/inc/battleship")

# target_include_directories(ex9 PUBLIC "${CMAKE_SOURCE_DIR}/inc/battleship")
# target_include_directories(ex9 PUBLIC "${CMAKE_SOURCE_DIR}/inc")
# target_compile_options(ex9 PUBLIC -Wall)